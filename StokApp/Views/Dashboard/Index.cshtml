@{
    ViewData["Title"] = "Dashboard";
    ViewData["Subtitle"] = "Overview sistem manajemen stok & tools";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<!-- Statistics Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
    <!-- Total Barang -->
    <div class="card bg-gradient-to-br from-blue-500 to-blue-600 text-white transform hover:scale-105 transition-transform">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-blue-100 text-sm mb-1">Total Barang</p>
                <h3 class="text-3xl font-bold">@ViewBag.TotalBarang</h3>
            </div>
            <div class="bg-white/20 rounded-full p-4">
                <i class="fas fa-boxes text-3xl"></i>
            </div>
        </div>
    </div>

    <!-- Total Stok -->
    <div class="card bg-gradient-to-br from-green-500 to-green-600 text-white transform hover:scale-105 transition-transform">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-green-100 text-sm mb-1">Total Stok</p>
                <h3 class="text-3xl font-bold">@ViewBag.TotalStok</h3>
            </div>
            <div class="bg-white/20 rounded-full p-4">
                <i class="fas fa-cubes text-3xl"></i>
            </div>
        </div>
    </div>

    <!-- Total Tools -->
    <div class="card bg-gradient-to-br from-purple-500 to-purple-600 text-white transform hover:scale-105 transition-transform">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-purple-100 text-sm mb-1">Total Tools</p>
                <h3 class="text-3xl font-bold">@ViewBag.TotalTools</h3>
            </div>
            <div class="bg-white/20 rounded-full p-4">
                <i class="fas fa-tools text-3xl"></i>
            </div>
        </div>
    </div>

    <!-- Total Plant -->
    <div class="card bg-gradient-to-br from-orange-500 to-orange-600 text-white transform hover:scale-105 transition-transform">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-orange-100 text-sm mb-1">Total Plant</p>
                <h3 class="text-3xl font-bold">@ViewBag.TotalPlant</h3>
            </div>
            <div class="bg-white/20 rounded-full p-4">
                <i class="fas fa-industry text-3xl"></i>
            </div>
        </div>
    </div>

    <!-- Total Area -->
    <div class="card bg-gradient-to-br from-pink-500 to-pink-600 text-white transform hover:scale-105 transition-transform">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-pink-100 text-sm mb-1">Total Area</p>
                <h3 class="text-3xl font-bold">@ViewBag.TotalArea</h3>
            </div>
            <div class="bg-white/20 rounded-full p-4">
                <i class="fas fa-map-marked-alt text-3xl"></i>
            </div>
        </div>
    </div>
</div>

<!-- Alert Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <!-- Stok Kritis -->
    <div class="card border-l-4 border-red-500">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-bold text-gray-800">
                <i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>
                Stok Kritis
            </h3>
            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">
                @(ViewBag.StokKritis?.Count ?? 0) item
            </span>
        </div>
        <div class="space-y-3 max-h-80 overflow-y-auto">
            @if (ViewBag.StokKritis != null && ViewBag.StokKritis.Count > 0)
            {
                foreach (var stok in ViewBag.StokKritis)
                {
                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-semibold text-gray-800">@stok.Barang.Nama</p>
                                <p class="text-sm text-gray-600">@(stok.Barang.Kategori?.Nama ?? "N/A")</p>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-red-600">@stok.TotalStok</p>
                                <p class="text-xs text-gray-500">Min: @stok.Barang.MinimumStok</p>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <p class="text-center text-gray-500 py-4">
                    <i class="fas fa-check-circle text-green-500 mr-2"></i>
                    Tidak ada stok kritis
                </p>
            }
        </div>
    </div>

    <!-- Mismatch & Replace -->
    <div class="space-y-6">
        <!-- Mismatch -->
        <div class="card border-l-4 border-yellow-500">
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-bold text-gray-800">
                    <i class="fas fa-exchange-alt text-yellow-500 mr-2"></i>
                    Ketidaksesuaian
                </h3>
                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold">
                    @(ViewBag.TotalMismatch ?? 0)
                </span>
            </div>
        </div>

        <!-- Replace Tanpa Stok -->
        <div class="card border-l-4 border-purple-500">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-gray-800">
                    <i class="fas fa-wrench text-purple-500 mr-2"></i>
                    Replace Tanpa Stok
                </h3>
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-semibold">
                    @(ViewBag.ReplaceNoStok?.Count ?? 0)
                </span>
            </div>
            <div class="space-y-2 max-h-40 overflow-y-auto">
                @if (ViewBag.ReplaceNoStok != null && ViewBag.ReplaceNoStok.Count > 0)
                {
                    foreach (var item in ViewBag.ReplaceNoStok)
                    {
                        <div class="bg-purple-50 p-2 rounded border border-purple-200">
                            <p class="font-semibold text-sm">@item.Barang.Nama</p>
                            <p class="text-xs text-gray-600">@item.Plant.Nama - @item.Area.Nama</p>
                        </div>
                    }
                }
                else
                {
                    <p class="text-center text-gray-500 text-sm py-2">Tidak ada data</p>
                }
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Recent Barang Masuk -->
    <div class="card">
        <h3 class="text-lg font-bold text-gray-800 mb-4">
            <i class="fas fa-arrow-down text-green-500 mr-2"></i>
            Barang Masuk Terbaru
        </h3>
        <div class="space-y-3">
            @if (ViewBag.RecentMasuk.Count > 0)
            {
                foreach (var item in ViewBag.RecentMasuk)
                {
                    <div class="border-l-4 border-green-500 bg-green-50 p-3 rounded-r-lg hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-semibold text-gray-800">@item.Barang.Nama</p>
                                <p class="text-sm text-gray-600">@item.Plant.Nama â€¢ @item.TujuanAwal</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-bold text-green-600">+@item.Jumlah</p>
                                <p class="text-xs text-gray-500">@item.Tanggal.ToString("dd MMM yyyy")</p>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <p class="text-center text-gray-500 py-4">Belum ada data</p>
            }
        </div>
    </div>

    <!-- Recent Barang Keluar -->
    <div class="card">
        <h3 class="text-lg font-bold text-gray-800 mb-4">
            <i class="fas fa-arrow-up text-red-500 mr-2"></i>
            Barang Keluar Terbaru
        </h3>
        <div class="space-y-3">
            @if (ViewBag.RecentKeluar.Count > 0)
            {
                foreach (var item in ViewBag.RecentKeluar)
                {
                    <div class="border-l-4 border-red-500 bg-red-50 p-3 rounded-r-lg hover:shadow-md transition-shadow">
<div class="flex justify-between items-start">
<div>
<p class="font-semibold text-gray-800">@item.Barang.Nama</p>
<p class="text-sm text-gray-600">@item.Plant.Nama - @item.Area.Nama</p>
<p class="text-xs text-gray-500">@item.TujuanPenggunaan</p>
</div>
<div class="text-right">
<p class="text-lg font-bold text-red-600">-@item.Jumlah</p>
<p class="text-xs text-gray-500">@item.Tanggal.ToString("dd MMM yyyy")</p>
</div>
</div>
</div>
}
}
else
{
<p class="text-center text-gray-500 py-4">Belum ada data</p>
}
</div>
</div>
</div>